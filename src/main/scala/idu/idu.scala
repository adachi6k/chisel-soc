package core_complex

import chisel3._

class RV32Decoder extends Module {
  val table: Array[(BitPat, List[BitPat])] = Array(
  LUI        ->  List(1, 011,  1, GPR,   FIELD_RD,     0,  SRC1_Z, FIELD_Z,       0, SRC2_Z, FIELD_Z,      1, 0, 0, 0,             0, 0, 0,             0, 0, 0),
  AUIPC      ->  List(1, 100,  1, GPR,   FIELD_RD,     0,  SRC1_Z, FIELD_Z,       0, SRC2_Z, FIELD_Z,      0, 0, 0, 0,             0, 0, 0,             0, 0, 0),
  JAL        ->  List(1, 100,  1, GPR,   FIELD_RD,     0,  SRC1_Z, FIELD_Z,       0, SRC2_Z, FIELD_Z,      0, 0, 0, 0,             0, 0, 0,             0, 0, 0),
  JALR       ->  List(1, 100,  1, GPR,   FIELD_RD,     1,  GPR,    FIELD_RS1,     0, SRC2_Z, FIELD_Z,      0, 0, 0, 0,             0, 0, 0,             0, 0, 0),
  BEQ        ->  List(1, 100,  0, TGT_Z, FIELD_Z,      1,  GPR,    FIELD_RS1,     1, GPR,    FIELD_RS2,    0, 0, 0, 0,             0, 0, 0,             0, 0, 0),
  BNE        ->  List(1, 100,  0, TGT_Z, FIELD_Z,      1,  GPR,    FIELD_RS1,     1, GPR,    FIELD_RS2,    0, 0, 0, 0,             0, 0, 0,             0, 0, 0),
  BLT        ->  List(1, 100,  0, TGT_Z, FIELD_Z,      1,  GPR,    FIELD_RS1,     1, GPR,    FIELD_RS2,    0, 0, 0, 0,             0, 0, 0,             0, 0, 0),
  BGE        ->  List(1, 100,  0, TGT_Z, FIELD_Z,      1,  GPR,    FIELD_RS1,     1, GPR,    FIELD_RS2,    0, 0, 0, 0,             0, 0, 0,             0, 0, 0),
  BLTU       ->  List(1, 100,  0, TGT_Z, FIELD_Z,      1,  GPR,    FIELD_RS1,     1, GPR,    FIELD_RS2,    0, 0, 0, 0,             0, 0, 0,             0, 0, 0),
  BGEU       ->  List(1, 100,  0, TGT_Z, FIELD_Z,      1,  GPR,    FIELD_RS1,     1, GPR,    FIELD_RS2,    0, 0, 0, 0,             0, 0, 0,             0, 0, 0),
  LB         ->  List(1, 001,  1, GPR,   FIELD_RD,     1,  GPR,    FIELD_RS1,     0, SRC2_Z, FIELD_Z,      0, 0, 0, 0,             0, 0, 0,             0, 0, 0),
  LH         ->  List(1, 001,  1, GPR,   FIELD_RD,     1,  GPR,    FIELD_RS1,     0, SRC2_Z, FIELD_Z,      0, 0, 0, 0,             0, 0, 0,             0, 0, 0),
  LW         ->  List(1, 001,  1, GPR,   FIELD_RD,     1,  GPR,    FIELD_RS1,     0, SRC2_Z, FIELD_Z,      0, 0, 0, 0,             0, 0, 0,             0, 0, 0),
  LD         ->  List(1, 001,  1, GPR,   FIELD_RD,     1,  GPR,    FIELD_RS1,     0, SRC2_Z, FIELD_Z,      0, 0, 0, 0,             0, 0, 0,             0, 0, 0),
  LBU        ->  List(1, 001,  1, GPR,   FIELD_RD,     1,  GPR,    FIELD_RS1,     0, SRC2_Z, FIELD_Z,      0, 0, 0, 0,             0, 0, 0,             0, 0, 0),
  LHU        ->  List(1, 001,  1, GPR,   FIELD_RD,     1,  GPR,    FIELD_RS1,     0, SRC2_Z, FIELD_Z,      0, 0, 0, 0,             0, 0, 0,             0, 0, 0),
  LWU        ->  List(1, 001,  1, GPR,   FIELD_RD,     1,  GPR,    FIELD_RS1,     0, SRC2_Z, FIELD_Z,      0, 0, 0, 0,             0, 0, 0,             0, 0, 0),
  SB         ->  List(1, 010,  0, TGT_Z, FIELD_Z,      1,  GPR,    FIELD_RS1,     1, GPR,    FIELD_RS2,    0, 0, 0, 0,             0, 0, 0,             0, 0, 0),
  SH         ->  List(1, 010,  0, TGT_Z, FIELD_Z,      1,  GPR,    FIELD_RS1,     1, GPR,    FIELD_RS2,    0, 0, 0, 0,             0, 0, 0,             0, 0, 0),
  SW         ->  List(1, 010,  0, TGT_Z, FIELD_Z,      1,  GPR,    FIELD_RS1,     1, GPR,    FIELD_RS2,    0, 0, 0, 0,             0, 0, 0,             0, 0, 0),
  SD         ->  List(1, 010,  0, TGT_Z, FIELD_Z,      1,  GPR,    FIELD_RS1,     1, GPR,    FIELD_RS2,    0, 0, 0, 0,             0, 0, 0,             0, 0, 0),
  ADDI       ->  List(1, 011,  1, GPR,   FIELD_RD,     1,  GPR,    FIELD_RS1,     0, SRC2_Z, FIELD_Z,      1, 0, 0, 0,             0, 0, 0,             0, 0, 0),
  SLTI       ->  List(1, 011,  1, GPR,   FIELD_RD,     1,  GPR,    FIELD_RS1,     0, SRC2_Z, FIELD_Z,      0, 1, 0, 0,             0, 0, 0,             0, 0, 0),
  SLTIU      ->  List(1, 011,  1, GPR,   FIELD_RD,     1,  GPR,    FIELD_RS1,     0, SRC2_Z, FIELD_Z,      0, 1, 0, 0,             0, 0, 0,             0, 0, 0),
  XORI       ->  List(1, 011,  1, GPR,   FIELD_RD,     1,  GPR,    FIELD_RS1,     0, SRC2_Z, FIELD_Z,      0, 1, 0, 0,             0, 0, 0,             0, 0, 0),
  ORI        ->  List(1, 011,  1, GPR,   FIELD_RD,     1,  GPR,    FIELD_RS1,     0, SRC2_Z, FIELD_Z,      0, 1, 0, 0,             0, 0, 0,             0, 0, 0),
  ANDI       ->  List(1, 011,  1, GPR,   FIELD_RD,     1,  GPR,    FIELD_RS1,     0, SRC2_Z, FIELD_Z,      0, 1, 0, 0,             0, 0, 0,             0, 0, 0),
  SLLI       ->  List(1, 011,  1, GPR,   FIELD_RD,     1,  GPR,    FIELD_RS1,     0, SRC2_Z, FIELD_Z,      0, 1, 0, 0,             0, 0, 0,             0, 0, 0),
  SRLI       ->  List(1, 011,  1, GPR,   FIELD_RD,     1,  GPR,    FIELD_RS1,     0, SRC2_Z, FIELD_Z,      0, 1, 0, 0,             0, 0, 0,             0, 0, 0),
  SRAI       ->  List(1, 011,  1, GPR,   FIELD_RD,     1,  GPR,    FIELD_RS1,     0, SRC2_Z, FIELD_Z,      0, 1, 0, 0,             0, 0, 0,             0, 0, 0),
  ADDIW      ->  List(1, 011,  1, GPR,   FIELD_RD,     1,  GPR,    FIELD_RS1,     0, SRC2_Z, FIELD_Z,      1, 0, 0, 0,             0, 0, 0,             0, 0, 0),
  SLLIW      ->  List(1, 011,  1, GPR,   FIELD_RD,     1,  GPR,    FIELD_RS1,     0, SRC2_Z, FIELD_Z,      0, 1, 0, 0,             0, 0, 0,             0, 0, 0),
  SRLIW      ->  List(1, 011,  1, GPR,   FIELD_RD,     1,  GPR,    FIELD_RS1,     0, SRC2_Z, FIELD_Z,      0, 1, 0, 0,             0, 0, 0,             0, 0, 0),
  SRAIW      ->  List(1, 011,  1, GPR,   FIELD_RD,     1,  GPR,    FIELD_RS1,     0, SRC2_Z, FIELD_Z,      0, 1, 0, 0,             0, 0, 0,             0, 0, 0),
  ADD        ->  List(1, 011,  1, GPR,   FIELD_RD,     1,  GPR,    FIELD_RS1,     1, GPR,    FIELD_RS2,    1, 0, 0, 0,             0, 0, 0,             0, 0, 0),
  SUB        ->  List(1, 011,  1, GPR,   FIELD_RD,     1,  GPR,    FIELD_RS1,     1, GPR,    FIELD_RS2,    1, 0, 0, 0,             0, 0, 0,             0, 0, 0),
  SLL        ->  List(1, 011,  1, GPR,   FIELD_RD,     1,  GPR,    FIELD_RS1,     1, GPR,    FIELD_RS2,    0, 1, 0, 0,             0, 0, 0,             0, 0, 0),
  SLT        ->  List(1, 011,  1, GPR,   FIELD_RD,     1,  GPR,    FIELD_RS1,     1, GPR,    FIELD_RS2,    0, 1, 0, 0,             0, 0, 0,             0, 0, 0),
  SLTU       ->  List(1, 011,  1, GPR,   FIELD_RD,     1,  GPR,    FIELD_RS1,     1, GPR,    FIELD_RS2,    0, 1, 0, 0,             0, 0, 0,             0, 0, 0),
  XOR        ->  List(1, 011,  1, GPR,   FIELD_RD,     1,  GPR,    FIELD_RS1,     1, GPR,    FIELD_RS2,    1, 0, 0, 0,             0, 0, 0,             0, 0, 0),
  SRL        ->  List(1, 011,  1, GPR,   FIELD_RD,     1,  GPR,    FIELD_RS1,     1, GPR,    FIELD_RS2,    0, 1, 0, 0,             0, 0, 0,             0, 0, 0),
  SRA        ->  List(1, 011,  1, GPR,   FIELD_RD,     1,  GPR,    FIELD_RS1,     1, GPR,    FIELD_RS2,    0, 1, 0, 0,             0, 0, 0,             0, 0, 0),
  OR         ->  List(1, 011,  1, GPR,   FIELD_RD,     1,  GPR,    FIELD_RS1,     1, GPR,    FIELD_RS2,    1, 0, 0, 0,             0, 0, 0,             0, 0, 0),
  AND        ->  List(1, 011,  1, GPR,   FIELD_RD,     1,  GPR,    FIELD_RS1,     1, GPR,    FIELD_RS2,    1, 0, 0, 0,             0, 0, 0,             0, 0, 0),
  MUL        ->  List(1, 101,  1, GPR,   FIELD_RD,     1,  GPR,    FIELD_RS1,     1, GPR,    FIELD_RS2,    0, 0, 0, 0,             0, 0, 0,             0, 0, 0),
  MULH       ->  List(1, 101,  1, GPR,   FIELD_RD,     1,  GPR,    FIELD_RS1,     1, GPR,    FIELD_RS2,    0, 0, 0, 0,             0, 0, 0,             0, 0, 0),
  MULHSU     ->  List(1, 101,  1, GPR,   FIELD_RD,     1,  GPR,    FIELD_RS1,     1, GPR,    FIELD_RS2,    0, 0, 0, 0,             0, 0, 0,             0, 0, 0),
  MULHU      ->  List(1, 101,  1, GPR,   FIELD_RD,     1,  GPR,    FIELD_RS1,     1, GPR,    FIELD_RS2,    0, 0, 0, 0,             0, 0, 0,             0, 0, 0),
  DIV        ->  List(1, 101,  1, GPR,   FIELD_RD,     1,  GPR,    FIELD_RS1,     1, GPR,    FIELD_RS2,    0, 0, 0, 0,             0, 0, 1,             0, 0, 0),
  DIVU       ->  List(1, 101,  1, GPR,   FIELD_RD,     1,  GPR,    FIELD_RS1,     1, GPR,    FIELD_RS2,    0, 0, 0, 0,             0, 0, 1,             0, 0, 0),
  REM        ->  List(1, 101,  1, GPR,   FIELD_RD,     1,  GPR,    FIELD_RS1,     1, GPR,    FIELD_RS2,    0, 0, 0, 0,             0, 0, 1,             0, 0, 0),
  REMU       ->  List(1, 101,  1, GPR,   FIELD_RD,     1,  GPR,    FIELD_RS1,     1, GPR,    FIELD_RS2,    0, 0, 0, 0,             0, 0, 1,             0, 0, 0),
  ADDW       ->  List(1, 011,  1, GPR,   FIELD_RD,     1,  GPR,    FIELD_RS1,     1, GPR,    FIELD_RS2,    1, 0, 0, 0,             0, 0, 0,             0, 0, 0),
  SUBW       ->  List(1, 011,  1, GPR,   FIELD_RD,     1,  GPR,    FIELD_RS1,     1, GPR,    FIELD_RS2,    1, 0, 0, 0,             0, 0, 0,             0, 0, 0),
  SLLW       ->  List(1, 011,  1, GPR,   FIELD_RD,     1,  GPR,    FIELD_RS1,     1, GPR,    FIELD_RS2,    0, 1, 0, 0,             0, 0, 0,             0, 0, 0),
  SRLW       ->  List(1, 011,  1, GPR,   FIELD_RD,     1,  GPR,    FIELD_RS1,     1, GPR,    FIELD_RS2,    0, 1, 0, 0,             0, 0, 0,             0, 0, 0),
  SRAW       ->  List(1, 011,  1, GPR,   FIELD_RD,     1,  GPR,    FIELD_RS1,     1, GPR,    FIELD_RS2,    0, 1, 0, 0,             0, 0, 0,             0, 0, 0),
  MULW       ->  List(1, 101,  1, GPR,   FIELD_RD,     1,  GPR,    FIELD_RS1,     1, GPR,    FIELD_RS2,    0, 0, 0, 0,             0, 0, 0,             0, 0, 0),
  DIVW       ->  List(1, 101,  1, GPR,   FIELD_RD,     1,  GPR,    FIELD_RS1,     1, GPR,    FIELD_RS2,    0, 0, 0, 0,             0, 0, 1,             0, 0, 0),
  DIVUW      ->  List(1, 101,  1, GPR,   FIELD_RD,     1,  GPR,    FIELD_RS1,     1, GPR,    FIELD_RS2,    0, 0, 0, 0,             0, 0, 1,             0, 0, 0),
  REMW       ->  List(1, 101,  1, GPR,   FIELD_RD,     1,  GPR,    FIELD_RS1,     1, GPR,    FIELD_RS2,    0, 0, 0, 0,             0, 0, 1,             0, 0, 0),
  REMUW      ->  List(1, 101,  1, GPR,   FIELD_RD,     1,  GPR,    FIELD_RS1,     1, GPR,    FIELD_RS2,    0, 0, 0, 0,             0, 0, 1,             0, 0, 0),
  FENCE      ->  List(1, 010,  0, TGT_Z, FIELD_Z,      0,  SRC1_Z, FIELD_Z,       0, SRC2_Z, FIELD_Z,      0, 0, 0, 0,             0, 0, 0,             0, 0, 0),
  FENCE_I    ->  List(1, 010,  0, TGT_Z, FIELD_Z,      1,  GPR,    FIELD_RS1,     0, SRC2_Z, FIELD_Z,      0, 0, 0, 0,             0, 0, 0,             0, 0, 0),
  LR_W       ->  List(1, 010,  1, GPR,   FIELD_RD,     1,  GPR,    FIELD_RS1,     0, SRC2_Z, FIELD_Z,      0, 0, 0, 0,             0, 0, 0,             1, 1, 0),
  LR_D       ->  List(1, 010,  1, GPR,   FIELD_RD,     1,  GPR,    FIELD_RS1,     0, SRC2_Z, FIELD_Z,      0, 0, 0, 0,             0, 0, 0,             1, 1, 0),
  SC_W       ->  List(1, 010,  1, GPR,   FIELD_RD,     1,  GPR,    FIELD_RS1,     1, GPR,    FIELD_RS2,    0, 0, 0, 0,             0, 0, 0,             1, 0, 1),
  SC_D       ->  List(1, 010,  1, GPR,   FIELD_RD,     1,  GPR,    FIELD_RS1,     1, GPR,    FIELD_RS2,    0, 0, 0, 0,             0, 0, 0,             1, 0, 1),
  AMOSWAP_W  ->  List(1, 010,  1, GPR,   FIELD_RD,     1,  GPR,    FIELD_RS1,     1, GPR,    FIELD_RS2,    0, 0, 0, 0,             0, 0, 0,             1, 0, 0),
  AMOADD_W   ->  List(1, 010,  1, GPR,   FIELD_RD,     1,  GPR,    FIELD_RS1,     1, GPR,    FIELD_RS2,    0, 0, 0, 0,             0, 0, 0,             1, 0, 0),
  AMOXOR_W   ->  List(1, 010,  1, GPR,   FIELD_RD,     1,  GPR,    FIELD_RS1,     1, GPR,    FIELD_RS2,    0, 0, 0, 0,             0, 0, 0,             1, 0, 0),
  AMOAND_W   ->  List(1, 010,  1, GPR,   FIELD_RD,     1,  GPR,    FIELD_RS1,     1, GPR,    FIELD_RS2,    0, 0, 0, 0,             0, 0, 0,             1, 0, 0),
  AMOOR_W    ->  List(1, 010,  1, GPR,   FIELD_RD,     1,  GPR,    FIELD_RS1,     1, GPR,    FIELD_RS2,    0, 0, 0, 0,             0, 0, 0,             1, 0, 0),
  AMOMIN_W   ->  List(1, 010,  1, GPR,   FIELD_RD,     1,  GPR,    FIELD_RS1,     1, GPR,    FIELD_RS2,    0, 0, 0, 0,             0, 0, 0,             1, 0, 0),
  AMOMAX_W   ->  List(1, 010,  1, GPR,   FIELD_RD,     1,  GPR,    FIELD_RS1,     1, GPR,    FIELD_RS2,    0, 0, 0, 0,             0, 0, 0,             1, 0, 0),
  AMOMINU_W  ->  List(1, 010,  1, GPR,   FIELD_RD,     1,  GPR,    FIELD_RS1,     1, GPR,    FIELD_RS2,    0, 0, 0, 0,             0, 0, 0,             1, 0, 0),
  AMOMAXU_W  ->  List(1, 010,  1, GPR,   FIELD_RD,     1,  GPR,    FIELD_RS1,     1, GPR,    FIELD_RS2,    0, 0, 0, 0,             0, 0, 0,             1, 0, 0),
  AMOSWAP_D  ->  List(1, 010,  1, GPR,   FIELD_RD,     1,  GPR,    FIELD_RS1,     1, GPR,    FIELD_RS2,    0, 0, 0, 0,             0, 0, 0,             1, 0, 0),
  AMOADD_D   ->  List(1, 010,  1, GPR,   FIELD_RD,     1,  GPR,    FIELD_RS1,     1, GPR,    FIELD_RS2,    0, 0, 0, 0,             0, 0, 0,             1, 0, 0),
  AMOXOR_D   ->  List(1, 010,  1, GPR,   FIELD_RD,     1,  GPR,    FIELD_RS1,     1, GPR,    FIELD_RS2,    0, 0, 0, 0,             0, 0, 0,             1, 0, 0),
  AMOAND_D   ->  List(1, 010,  1, GPR,   FIELD_RD,     1,  GPR,    FIELD_RS1,     1, GPR,    FIELD_RS2,    0, 0, 0, 0,             0, 0, 0,             1, 0, 0),
  AMOOR_D    ->  List(1, 010,  1, GPR,   FIELD_RD,     1,  GPR,    FIELD_RS1,     1, GPR,    FIELD_RS2,    0, 0, 0, 0,             0, 0, 0,             1, 0, 0),
  AMOMIN_D   ->  List(1, 010,  1, GPR,   FIELD_RD,     1,  GPR,    FIELD_RS1,     1, GPR,    FIELD_RS2,    0, 0, 0, 0,             0, 0, 0,             1, 0, 0),
  AMOMAX_D   ->  List(1, 010,  1, GPR,   FIELD_RD,     1,  GPR,    FIELD_RS1,     1, GPR,    FIELD_RS2,    0, 0, 0, 0,             0, 0, 0,             1, 0, 0),
  AMOMINU_D  ->  List(1, 010,  1, GPR,   FIELD_RD,     1,  GPR,    FIELD_RS1,     1, GPR,    FIELD_RS2,    0, 0, 0, 0,             0, 0, 0,             1, 0, 0),
  AMOMAXU_D  ->  List(1, 010,  1, GPR,   FIELD_RD,     1,  GPR,    FIELD_RS1,     1, GPR,    FIELD_RS2,    0, 0, 0, 0,             0, 0, 0,             1, 0, 0),
  ECALL      ->  List(1, 101,  0, TGT_Z, FIELD_Z,      0,  SRC1_Z, FIELD_Z,       0, SRC2_Z, FIELD_Z,      0, 0, 0, 0,             0, 1, 0,             0, 0, 0),
  EBREAK     ->  List(1, 101,  0, TGT_Z, FIELD_Z,      0,  SRC1_Z, FIELD_Z,       0, SRC2_Z, FIELD_Z,      0, 0, 0, 0,             0, 1, 0,             0, 0, 0),
  HALT       ->  List(1, 101,  0, TGT_Z, FIELD_Z,      0,  SRC1_Z, FIELD_Z,       0, SRC2_Z, FIELD_Z,      0, 0, 0, 0,             0, 0, 0,             0, 0, 0),
  URET       ->  List(1, 101,  0, TGT_Z, FIELD_Z,      0,  SRC1_Z, FIELD_Z,       0, SRC2_Z, FIELD_Z,      0, 0, 0, 0,             0, 1, 0,             0, 0, 0),
  SRET       ->  List(1, 101,  0, TGT_Z, FIELD_Z,      0,  SRC1_Z, FIELD_Z,       0, SRC2_Z, FIELD_Z,      0, 0, 0, 0,             0, 1, 0,             0, 0, 0),
  MRET       ->  List(1, 101,  0, TGT_Z, FIELD_Z,      0,  SRC1_Z, FIELD_Z,       0, SRC2_Z, FIELD_Z,      0, 0, 0, 0,             0, 1, 0,             0, 0, 0),
  WFI        ->  List(1, 101,  0, TGT_Z, FIELD_Z,      0,  SRC1_Z, FIELD_Z,       0, SRC2_Z, FIELD_Z,      0, 0, 0, 0,             0, 0, 0,             0, 0, 0),
  CSRRW      ->  List(1, 101,  1, GPR,   FIELD_RD,     1,  GPR,    FIELD_RS1,     0, SRC2_Z, FIELD_Z,      0, 0, 0, 0,             1, 0, 0,             0, 0, 0),
  CSRRS      ->  List(1, 101,  1, GPR,   FIELD_RD,     1,  GPR,    FIELD_RS1,     0, SRC2_Z, FIELD_Z,      0, 0, 0, 0,             1, 0, 0,             0, 0, 0),
  CSRRC      ->  List(1, 101,  1, GPR,   FIELD_RD,     1,  GPR,    FIELD_RS1,     0, SRC2_Z, FIELD_Z,      0, 0, 0, 0,             1, 0, 0,             0, 0, 0),
  CSRRWI     ->  List(1, 101,  1, GPR,   FIELD_RD,     0,  SRC1_Z, FIELD_Z,       0, SRC2_Z, FIELD_Z,      0, 0, 0, 0,             1, 0, 0,             0, 0, 0),
  CSRRSI     ->  List(1, 101,  1, GPR,   FIELD_RD,     0,  SRC1_Z, FIELD_Z,       0, SRC2_Z, FIELD_Z,      0, 0, 0, 0,             1, 0, 0,             0, 0, 0),
  CSRRCI     ->  List(1, 101,  1, GPR,   FIELD_RD,     0,  SRC1_Z, FIELD_Z,       0, SRC2_Z, FIELD_Z,      0, 0, 0, 0,             1, 0, 0,             0, 0, 0),
  SFENCE_VM  ->  List(1, 010,  0, TGT_Z, FIELD_Z,      1,  GPR,    FIELD_RS1,     0, SRC2_Z, FIELD_Z,      0, 0, 0, 0,             0, 0, 0,             0, 0, 0),
  )
}
